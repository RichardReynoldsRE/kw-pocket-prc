import React, { useState } from 'react';
import { Printer, Edit, Home, FileText } from 'lucide-react';

export default function PocketPRCTool() {
  const [mode, setMode] = useState('edit');
  const [formData, setFormData] = useState({
    propertyAddress: '',
    // Section 1: Assessor's Office
    homesteadExemption: false,
    homesteadAmount: '',
    veteransExemption: false,
    veteransAmount: '',
    treeGrowthExemption: false,
    treeGrowthAmount: '',
    noExemptions: false,
    propertyDataCard: false,
    taxMap: false,
    // Section 2: Code Enforcement
    dateVisited: '',
    currentZoning: '',
    floodZone: '',
    zoningOverlay: '',
    conformsToZoning: '',
    dwellingUnits: '',
    septicInShoreland: '',
    permitsDescription: '',
    // Section 3: Documents
    codeEnforcementDocs: false,
    zoneOverlays: false,
    recordedSurvey: false,
    easements: false,
    associationDocs: false,
    associationFinancials: false,
    condoCertificate: false,
    septicDesign: false,
    // Section 4
    completedBy: ''
  });

  const handleChange = (field, value) => {
    setFormData(prev => ({ ...prev, [field]: value }));
  };

  const handlePrint = () => {
    window.print();
  };

  if (mode === 'preview') {
    return (
      <div className="min-h-screen bg-white">
        <div className="print:hidden bg-red-600 text-white p-4 flex justify-between items-center sticky top-0 z-10">
          <h1 className="text-xl font-bold">Preview Mode</h1>
          <div className="flex gap-2">
            <button
              onClick={() => setMode('edit')}
              className="bg-white text-red-600 px-4 py-2 rounded flex items-center gap-2"
            >
              <Edit size={18} />
              Edit
            </button>
            <button
              onClick={handlePrint}
              className="bg-white text-red-600 px-4 py-2 rounded flex items-center gap-2"
            >
              <Printer size={18} />
              Print
            </button>
          </div>
        </div>

        <div className="max-w-4xl mx-auto p-8 print:p-0">
          <div className="border-4 border-black print:border-2">
            {/* Header */}
            <div className="bg-red-600 text-white p-4 flex items-center gap-4">
              <div className="bg-white text-red-600 font-bold text-2xl px-3 py-2">kw</div>
              <div>
                <h1 className="text-2xl font-bold">PUBLIC RECORD CHECKLIST</h1>
                <p className="text-sm">Property Address: {formData.propertyAddress || '_______________'}</p>
              </div>
            </div>

            {/* Section 1: Assessor's Office */}
            <div className="border-t-2 border-black">
              <div className="bg-gray-100 p-3 font-bold border-b-2 border-black">
                1. ASSESSOR'S OFFICE
              </div>
              <div className="p-3 border-b-2 border-black">
                <p className="mb-2">Any Tax Exemptions?</p>
                <div className="flex flex-wrap gap-4">
                  <label className="flex items-center gap-2">
                    <input type="checkbox" checked={formData.homesteadExemption} readOnly />
                    Homestead ${formData.homesteadAmount || '______'}
                  </label>
                  <label className="flex items-center gap-2">
                    <input type="checkbox" checked={formData.veteransExemption} readOnly />
                    Veterans ${formData.veteransAmount || '______'}
                  </label>
                  <label className="flex items-center gap-2">
                    <input type="checkbox" checked={formData.treeGrowthExemption} readOnly />
                    Tree Growth ${formData.treeGrowthAmount || '______'}
                  </label>
                  <label className="flex items-center gap-2">
                    <input type="checkbox" checked={formData.noExemptions} readOnly />
                    N/A
                  </label>
                </div>
              </div>
              <div className="p-3 border-b-2 border-black">
                <label className="flex items-center gap-2">
                  <input type="checkbox" checked={formData.propertyDataCard} readOnly />
                  ATTACH Property Data Card - required
                </label>
              </div>
              <div className="p-3 border-b-2 border-black">
                <label className="flex items-center gap-2">
                  <input type="checkbox" checked={formData.taxMap} readOnly />
                  ATTACH Tax Map - required
                </label>
              </div>
            </div>

            {/* Section 2: Code Enforcement */}
            <div className="border-t-2 border-black">
              <div className="bg-gray-100 p-3 font-bold border-b-2 border-black flex justify-between">
                <span>2. CODE ENFORCEMENT OFFICE</span>
                <span>DATE VISITED: {formData.dateVisited || '_______________'}</span>
              </div>
              <div className="p-3 border-b-2 border-black">
                <p>1. Current Zoning: {formData.currentZoning || '_______________'}</p>
                <p className="mt-2">
                  Flood Zone? 
                  <label className="ml-2"><input type="checkbox" checked={formData.floodZone === 'Yes'} readOnly /> Yes</label>
                  <label className="ml-2"><input type="checkbox" checked={formData.floodZone === 'No'} readOnly /> No</label>
                  <span className="ml-4">Zoning Overlay? {formData.zoningOverlay || '_______________'}</span>
                </p>
              </div>
              <div className="p-3 border-b-2 border-black">
                <p>2. Does current use appear to conform to zoning restrictions?</p>
                <p className="mt-1">{formData.conformsToZoning || '_______________'}</p>
              </div>
              <div className="p-3 border-b-2 border-black">
                <p>3. Number of legal dwelling units permitted per ordinance?</p>
                <p className="mt-1">{formData.dwellingUnits || '_______________'}</p>
              </div>
              <div className="p-3 border-b-2 border-black">
                <p>4. Septic system located in a shoreland zone?</p>
                <p className="mt-2">
                  <label className="ml-2"><input type="checkbox" checked={formData.septicInShoreland === 'Yes'} readOnly /> Yes</label>
                  <label className="ml-2"><input type="checkbox" checked={formData.septicInShoreland === 'No'} readOnly /> No</label>
                  <label className="ml-2"><input type="checkbox" checked={formData.septicInShoreland === 'N/A'} readOnly /> N/A</label>
                </p>
              </div>
              <div className="p-3 border-b-2 border-black">
                <p className="font-semibold">5. Record dates & descriptions of permits issued or code enforcement issues, if any. DO NOT LEAVE BLANK</p>
                <p className="mt-2 whitespace-pre-wrap min-h-[60px]">{formData.permitsDescription || ''}</p>
              </div>
            </div>

            {/* Section 3: Documents */}
            <div className="border-t-2 border-black">
              <div className="bg-gray-100 p-3 font-bold border-b-2 border-black">
                3. SUBMIT THE FOLLOWING DOCUMENTS <em>IF APPLICABLE:</em>
              </div>
              <div className="p-3 border-b-2 border-black">
                <label className="flex items-center gap-2">
                  <input type="checkbox" checked={formData.codeEnforcementDocs} readOnly />
                  Pertinent code enforcement file documents (from section 2 item 5 above)
                </label>
              </div>
              <div className="p-3 border-b-2 border-black">
                <label className="flex items-center gap-2">
                  <input type="checkbox" checked={formData.zoneOverlays} readOnly />
                  Zone Overlays (from section 2 item 1 above)
                </label>
              </div>
              <div className="p-3 border-b-2 border-black">
                <label className="flex items-center gap-2">
                  <input type="checkbox" checked={formData.recordedSurvey} readOnly />
                  Recorded survey (if deed only references a plan to describe the property)
                </label>
              </div>
              <div className="p-3 border-b-2 border-black">
                <label className="flex items-center gap-2">
                  <input type="checkbox" checked={formData.easements} readOnly />
                  Recorded easements, restrictions, covenants or subdivision plan restrictions
                </label>
              </div>
              <div className="p-3 border-b-2 border-black">
                <label className="flex items-center gap-2">
                  <input type="checkbox" checked={formData.associationDocs} readOnly />
                  Association declarations, bylaws, rules/regs
                </label>
              </div>
              <div className="p-3 border-b-2 border-black">
                <label className="flex items-center gap-2">
                  <input type="checkbox" checked={formData.associationFinancials} readOnly />
                  Association financial statements
                </label>
              </div>
              <div className="p-3 border-b-2 border-black">
                <label className="flex items-center gap-2">
                  <input type="checkbox" checked={formData.condoCertificate} readOnly />
                  Condominium resale certificate or public offering statement
                </label>
              </div>
              <div className="p-3 border-b-2 border-black">
                <label className="flex items-center gap-2">
                  <input type="checkbox" checked={formData.septicDesign} readOnly />
                  Septic Design (HHE 200)
                </label>
              </div>
            </div>

            {/* Section 4: Completed By */}
            <div className="border-t-2 border-black">
              <div className="p-3 flex justify-between items-center">
                <div>
                  <strong>4. COMPLETED BY:</strong> {formData.completedBy || '_______________________________________________'}
                </div>
                <div className="text-sm text-gray-600">Rev. 5.18</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    );
  }

  // Edit Mode
  return (
    <div className="min-h-screen bg-gray-50">
      <div className="bg-red-600 text-white p-4 sticky top-0 z-10 shadow-lg">
        <div className="max-w-2xl mx-auto flex justify-between items-center">
          <h1 className="text-xl font-bold flex items-center gap-2">
            <Home size={24} />
            Pocket PRC Tool
          </h1>
          <button
            onClick={() => setMode('preview')}
            className="bg-white text-red-600 px-4 py-2 rounded font-semibold flex items-center gap-2"
          >
            <FileText size={18} />
            Preview
          </button>
        </div>
      </div>

      <div className="max-w-2xl mx-auto p-4 pb-20">
        {/* Property Address */}
        <div className="bg-white rounded-lg shadow p-4 mb-4">
          <label className="block font-semibold mb-2">Property Address</label>
          <input
            type="text"
            value={formData.propertyAddress}
            onChange={(e) => handleChange('propertyAddress', e.target.value)}
            className="w-full border rounded px-3 py-2"
            placeholder="123 Main Street, City, State ZIP"
          />
        </div>

        {/* Section 1: Assessor's Office */}
        <div className="bg-white rounded-lg shadow p-4 mb-4">
          <h2 className="text-lg font-bold mb-4 text-red-600">1. ASSESSOR'S OFFICE</h2>
          
          <div className="mb-4">
            <p className="font-semibold mb-2">Tax Exemptions:</p>
            <label className="flex items-center gap-2 mb-2">
              <input
                type="checkbox"
                checked={formData.homesteadExemption}
                onChange={(e) => handleChange('homesteadExemption', e.target.checked)}
                className="w-5 h-5"
              />
              <span>Homestead</span>
              <input
                type="text"
                value={formData.homesteadAmount}
                onChange={(e) => handleChange('homesteadAmount', e.target.value)}
                placeholder="Amount"
                className="border rounded px-2 py-1 w-24"
              />
            </label>
            <label className="flex items-center gap-2 mb-2">
              <input
                type="checkbox"
                checked={formData.veteransExemption}
                onChange={(e) => handleChange('veteransExemption', e.target.checked)}
                className="w-5 h-5"
              />
              <span>Veterans</span>
              <input
                type="text"
                value={formData.veteransAmount}
                onChange={(e) => handleChange('veteransAmount', e.target.value)}
                placeholder="Amount"
                className="border rounded px-2 py-1 w-24"
              />
            </label>
            <label className="flex items-center gap-2 mb-2">
              <input
                type="checkbox"
                checked={formData.treeGrowthExemption}
                onChange={(e) => handleChange('treeGrowthExemption', e.target.checked)}
                className="w-5 h-5"
              />
              <span>Tree Growth</span>
              <input
                type="text"
                value={formData.treeGrowthAmount}
                onChange={(e) => handleChange('treeGrowthAmount', e.target.value)}
                placeholder="Amount"
                className="border rounded px-2 py-1 w-24"
              />
            </label>
            <label className="flex items-center gap-2">
              <input
                type="checkbox"
                checked={formData.noExemptions}
                onChange={(e) => handleChange('noExemptions', e.target.checked)}
                className="w-5 h-5"
              />
              <span>N/A (No exemptions)</span>
            </label>
          </div>

          <div className="space-y-2">
            <label className="flex items-center gap-2">
              <input
                type="checkbox"
                checked={formData.propertyDataCard}
                onChange={(e) => handleChange('propertyDataCard', e.target.checked)}
                className="w-5 h-5"
              />
              <span>Property Data Card attached (required)</span>
            </label>
            <label className="flex items-center gap-2">
              <input
                type="checkbox"
                checked={formData.taxMap}
                onChange={(e) => handleChange('taxMap', e.target.checked)}
                className="w-5 h-5"
              />
              <span>Tax Map attached (required)</span>
            </label>
          </div>
        </div>

        {/* Section 2: Code Enforcement */}
        <div className="bg-white rounded-lg shadow p-4 mb-4">
          <h2 className="text-lg font-bold mb-4 text-red-600">2. CODE ENFORCEMENT OFFICE</h2>
          
          <div className="mb-4">
            <label className="block font-semibold mb-2">Date Visited</label>
            <input
              type="date"
              value={formData.dateVisited}
              onChange={(e) => handleChange('dateVisited', e.target.value)}
              className="w-full border rounded px-3 py-2"
            />
          </div>

          <div className="mb-4">
            <label className="block font-semibold mb-2">Current Zoning</label>
            <input
              type="text"
              value={formData.currentZoning}
              onChange={(e) => handleChange('currentZoning', e.target.value)}
              className="w-full border rounded px-3 py-2"
              placeholder="e.g., R-1, Commercial, etc."
            />
          </div>

          <div className="mb-4">
            <label className="block font-semibold mb-2">Flood Zone?</label>
            <div className="flex gap-4">
              <label className="flex items-center gap-2">
                <input
                  type="radio"
                  name="floodZone"
                  checked={formData.floodZone === 'Yes'}
                  onChange={() => handleChange('floodZone', 'Yes')}
                  className="w-5 h-5"
                />
                Yes
              </label>
              <label className="flex items-center gap-2">
                <input
                  type="radio"
                  name="floodZone"
                  checked={formData.floodZone === 'No'}
                  onChange={() => handleChange('floodZone', 'No')}
                  className="w-5 h-5"
                />
                No
              </label>
            </div>
          </div>

          <div className="mb-4">
            <label className="block font-semibold mb-2">Zoning Overlay?</label>
            <input
              type="text"
              value={formData.zoningOverlay}
              onChange={(e) => handleChange('zoningOverlay', e.target.value)}
              className="w-full border rounded px-3 py-2"
              placeholder="If applicable"
            />
          </div>

          <div className="mb-4">
            <label className="block font-semibold mb-2">
              Does current use appear to conform to zoning restrictions?
            </label>
            <input
              type="text"
              value={formData.conformsToZoning}
              onChange={(e) => handleChange('conformsToZoning', e.target.value)}
              className="w-full border rounded px-3 py-2"
              placeholder="Yes/No and explanation"
            />
          </div>

          <div className="mb-4">
            <label className="block font-semibold mb-2">
              Number of legal dwelling units permitted per ordinance?
            </label>
            <input
              type="text"
              value={formData.dwellingUnits}
              onChange={(e) => handleChange('dwellingUnits', e.target.value)}
              className="w-full border rounded px-3 py-2"
              placeholder="e.g., 1, 2, etc."
            />
          </div>

          <div className="mb-4">
            <label className="block font-semibold mb-2">
              Septic system located in a shoreland zone?
            </label>
            <div className="flex gap-4">
              <label className="flex items-center gap-2">
                <input
                  type="radio"
                  name="septicInShoreland"
                  checked={formData.septicInShoreland === 'Yes'}
                  onChange={() => handleChange('septicInShoreland', 'Yes')}
                  className="w-5 h-5"
                />
                Yes
              </label>
              <label className="flex items-center gap-2">
                <input
                  type="radio"
                  name="septicInShoreland"
                  checked={formData.septicInShoreland === 'No'}
                  onChange={() => handleChange('septicInShoreland', 'No')}
                  className="w-5 h-5"
                />
                No
              </label>
              <label className="flex items-center gap-2">
                <input
                  type="radio"
                  name="septicInShoreland"
                  checked={formData.septicInShoreland === 'N/A'}
                  onChange={() => handleChange('septicInShoreland', 'N/A')}
                  className="w-5 h-5"
                />
                N/A
              </label>
            </div>
          </div>

          <div className="mb-4">
            <label className="block font-semibold mb-2">
              Permits issued or code enforcement issues (DO NOT LEAVE BLANK)
            </label>
            <textarea
              value={formData.permitsDescription}
              onChange={(e) => handleChange('permitsDescription', e.target.value)}
              className="w-full border rounded px-3 py-2"
              rows="4"
              placeholder="Record dates and descriptions, or write 'None' if not applicable"
            />
          </div>
        </div>

        {/* Section 3: Documents */}
        <div className="bg-white rounded-lg shadow p-4 mb-4">
          <h2 className="text-lg font-bold mb-4 text-red-600">
            3. DOCUMENTS TO SUBMIT <span className="text-sm italic">(if applicable)</span>
          </h2>
          
          <div className="space-y-3">
            <label className="flex items-start gap-2">
              <input
                type="checkbox"
                checked={formData.codeEnforcementDocs}
                onChange={(e) => handleChange('codeEnforcementDocs', e.target.checked)}
                className="w-5 h-5 mt-0.5"
              />
              <span>Code enforcement file documents</span>
            </label>
            <label className="flex items-start gap-2">
              <input
                type="checkbox"
                checked={formData.zoneOverlays}
                onChange={(e) => handleChange('zoneOverlays', e.target.checked)}
                className="w-5 h-5 mt-0.5"
              />
              <span>Zone Overlays</span>
            </label>
            <label className="flex items-start gap-2">
              <input
                type="checkbox"
                checked={formData.recordedSurvey}
                onChange={(e) => handleChange('recordedSurvey', e.target.checked)}
                className="w-5 h-5 mt-0.5"
              />
              <span>Recorded survey</span>
            </label>
            <label className="flex items-start gap-2">
              <input
                type="checkbox"
                checked={formData.easements}
                onChange={(e) => handleChange('easements', e.target.checked)}
                className="w-5 h-5 mt-0.5"
              />
              <span>Recorded easements, restrictions, covenants</span>
            </label>
            <label className="flex items-start gap-2">
              <input
                type="checkbox"
                checked={formData.associationDocs}
                onChange={(e) => handleChange('associationDocs', e.target.checked)}
                className="w-5 h-5 mt-0.5"
              />
              <span>Association declarations, bylaws, rules/regs</span>
            </label>
            <label className="flex items-start gap-2">
              <input
                type="checkbox"
                checked={formData.associationFinancials}
                onChange={(e) => handleChange('associationFinancials', e.target.checked)}
                className="w-5 h-5 mt-0.5"
              />
              <span>Association financial statements</span>
            </label>
            <label className="flex items-start gap-2">
              <input
                type="checkbox"
                checked={formData.condoCertificate}
                onChange={(e) => handleChange('condoCertificate', e.target.checked)}
                className="w-5 h-5 mt-0.5"
              />
              <span>Condominium resale certificate</span>
            </label>
            <label className="flex items-start gap-2">
              <input
                type="checkbox"
                checked={formData.septicDesign}
                onChange={(e) => handleChange('septicDesign', e.target.checked)}
                className="w-5 h-5 mt-0.5"
              />
              <span>Septic Design (HHE 200)</span>
            </label>
          </div>
        </div>

        {/* Section 4: Completed By */}
        <div className="bg-white rounded-lg shadow p-4 mb-4">
          <h2 className="text-lg font-bold mb-4 text-red-600">4. COMPLETED BY</h2>
          <input
            type="text"
            value={formData.completedBy}
            onChange={(e) => handleChange('completedBy', e.target.value)}
            className="w-full border rounded px-3 py-2"
            placeholder="Your name"
          />
        </div>
      </div>
    </div>
  );
}
